(()=>{var e={};e.id=338,e.ids=[338],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},5315:e=>{"use strict";e.exports=require("path")},7360:e=>{"use strict";e.exports=require("url")},2442:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>l.a,__next_app__:()=>h,originalPathname:()=>u,pages:()=>d,routeModule:()=>x,tree:()=>c}),r(9912),r(2029),r(2523);var s=r(3191),a=r(8716),n=r(7922),l=r.n(n),o=r(5231),i={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(i[e]=()=>o[e]);r.d(t,i);let c=["",{children:["(routes)",{children:["career",{children:["consultant",{children:["session",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,9912)),"D:\\youth-experience\\src\\app\\(routes)\\career\\consultant\\session\\page.tsx"]}]},{}]},{}]},{}]},{metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,7026))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,2029)),"D:\\youth-experience\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.bind(r,2523)),"D:\\youth-experience\\src\\app\\not-found.tsx"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,7026))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],d=["D:\\youth-experience\\src\\app\\(routes)\\career\\consultant\\session\\page.tsx"],u="/(routes)/career/consultant/session/page",h={require:r,loadChunk:()=>Promise.resolve()},x=new s.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/(routes)/career/consultant/session/page",pathname:"/career/consultant/session",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},5522:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,2994,23)),Promise.resolve().then(r.t.bind(r,6114,23)),Promise.resolve().then(r.t.bind(r,9727,23)),Promise.resolve().then(r.t.bind(r,9671,23)),Promise.resolve().then(r.t.bind(r,1868,23)),Promise.resolve().then(r.t.bind(r,4759,23))},7524:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,9404,23))},1584:(e,t,r)=>{Promise.resolve().then(r.bind(r,3264))},9155:()=>{},3264:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>l});var s=r(326),a=r(7577);let n=({children:e})=>s.jsx("span",{className:"inline-block w-4 h-4 text-center mr-1",children:e});function l(){let[e,t]=(0,a.useState)("상담사"),[r,l]=(0,a.useState)(!1),[o,i]=(0,a.useState)(!1),[c,d]=(0,a.useState)(!1),[u,h]=(0,a.useState)([]),[x,p]=(0,a.useState)(""),m=(0,a.useRef)(null),b=(0,a.useRef)(null),g=(0,a.useRef)(null),f=(0,a.useRef)(null),w=(0,a.useRef)(null),v=e=>{let t=new SpeechSynthesisUtterance(e.replace(/[^\p{Letter}\p{Number}\p{Mark}\s.,?!]/gu," ").replace(/\s+/g," ").trim());t.lang="ko-KR",t.rate=1,t.pitch=1;try{window.speechSynthesis.cancel()}catch{}window.speechSynthesis.speak(t)},y=e=>h(t=>[...t,e]),j=()=>{let e=x.trim();e&&(p(""),y({who:"me",text:e,ts:Date.now()}),setTimeout(()=>{y({who:"consultant",text:`좋아요. "${e}" 내용 확인했습니다. 계속 말씀해 주세요.`,ts:Date.now()})},500))},N=async()=>{if(!r){l(!0);try{let e=await navigator.mediaDevices.getUserMedia({video:{width:{ideal:1280},height:{ideal:720}},audio:{echoCancellation:!0,noiseSuppression:!0}});g.current=e,m.current&&(m.current.srcObject=e,await m.current.play().catch(()=>void 0));let t=new RTCPeerConnection,r=new RTCPeerConnection;f.current=t,w.current=r,e.getTracks().forEach(r=>t.addTrack(r,e)),r.ontrack=e=>{let t=e.streams[0];b.current&&(b.current.srcObject=t,b.current.play().catch(()=>void 0))},t.onicecandidate=e=>{e.candidate&&r.addIceCandidate(e.candidate)},r.onicecandidate=e=>{e.candidate&&t.addIceCandidate(e.candidate)};let s=await t.createOffer({offerToReceiveVideo:!0,offerToReceiveAudio:!0});await t.setLocalDescription(s),await r.setRemoteDescription(s);let a=await r.createAnswer();await r.setLocalDescription(a),await t.setRemoteDescription(a),v("화상 연결을 시작합니다. 자기소개와 관심 직업 분야를 말씀해 주세요.")}catch(e){console.error("미디어 접근 또는 WebRTC 연결 오류:",e),l(!1),v("카메라나 마이크에 접근할 수 없습니다. 권한을 확인해 주세요.")}}},k=e=>{e&&(document.fullscreenElement||e.requestFullscreen?.())};return(0,s.jsxs)("main",{className:"mx-auto max-w-7xl p-4 sm:p-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h1",{className:"text-2xl sm:text-3xl font-extrabold",children:"화상 상담 세션"}),s.jsx("div",{className:"flex gap-2",children:s.jsx("button",{className:"px-4 py-2 rounded-lg bg-gray-600 text-white hover:bg-gray-700",onClick:()=>window.location.href="/",children:"홈으로"})})]}),(0,s.jsxs)("p",{className:"text-gray-600 mb-4",children:["상담사: ",s.jsx("span",{className:"font-semibold",children:e})]}),(0,s.jsxs)("section",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:[(0,s.jsxs)("div",{className:"lg:col-span-2 grid grid-rows-2 gap-4",children:[(0,s.jsxs)("div",{className:"relative rounded-2xl overflow-hidden bg-black",children:[s.jsx("video",{ref:b,className:"w-full h-[44vh] object-cover",playsInline:!0,autoPlay:!0,muted:!0,poster:"https://placehold.co/1280x720/000000/ffffff?text=Consultant+Video+Feed"}),s.jsx("div",{className:"absolute top-2 left-2 text-xs px-2 py-1 rounded bg-white/20 text-white backdrop-blur",children:"상대 영상 (데모: 본인 미러 연결)"}),(0,s.jsxs)("button",{className:"absolute bottom-2 right-2 text-xs px-2 py-1 rounded bg-white/20 text-white backdrop-blur hover:bg-white/30",onClick:()=>k(b.current),children:[s.jsx(n,{children:"⛶"})," 전체화면"]})]}),(0,s.jsxs)("div",{className:"relative rounded-2xl overflow-hidden bg-black",children:[s.jsx("video",{ref:m,className:"w-full h-[28vh] object-cover",playsInline:!0,muted:!0,poster:"https://placehold.co/1280x720/000000/ffffff?text=My+Video+Feed"}),s.jsx("div",{className:"absolute top-2 left-2 text-xs px-2 py-1 rounded bg-white/20 text-white backdrop-blur",children:"내 카메라"})]})]}),(0,s.jsxs)("div",{className:"rounded-2xl border bg-white shadow-lg flex flex-col h-[72vh] overflow-hidden",children:[s.jsx("div",{className:"px-4 py-3 border-b font-bold bg-gray-50",children:"채팅"}),(0,s.jsxs)("div",{className:"flex-1 overflow-y-auto p-4 space-y-3",children:[u.map((e,t)=>s.jsx("div",{className:`flex ${"me"===e.who?"justify-end":"justify-start"}`,children:(0,s.jsxs)("div",{className:`${"me"===e.who?"bg-blue-600 text-white shadow-md":"bg-gray-100 text-gray-900 shadow-sm"} px-3 py-2 rounded-xl max-w-[80%]`,children:[s.jsx("div",{className:"text-sm whitespace-pre-wrap",children:e.text}),s.jsx("div",{className:`text-[10px] mt-1 text-right ${"me"===e.who?"text-blue-100":"text-gray-400"}`,children:new Date(e.ts).toLocaleTimeString()})]})},t)),s.jsx("div",{ref:e=>e?.scrollIntoView({behavior:"smooth"})})]}),(0,s.jsxs)("div",{className:"p-3 border-t flex gap-2",children:[s.jsx("input",{value:x,onChange:e=>p(e.target.value),onKeyDown:e=>"Enter"===e.key&&j(),placeholder:"메시지를 입력하세요",className:"flex-1 border border-gray-300 rounded-lg px-3 py-2 outline-none focus:ring-2 focus:ring-blue-400 transition",disabled:!r}),s.jsx("button",{onClick:j,className:"px-4 py-2 rounded-lg bg-blue-600 text-white font-semibold hover:bg-blue-700 transition disabled:opacity-50 disabled:cursor-not-allowed",disabled:!r||0===x.trim().length,children:"보내기"})]})]})]}),(0,s.jsxs)("div",{className:"mt-6 flex flex-wrap items-center gap-3 p-4 bg-white rounded-xl shadow-xl",children:[r?(0,s.jsxs)("button",{className:"px-5 py-3 rounded-xl bg-rose-600 text-white font-bold hover:bg-rose-700 shadow-lg transition transform hover:scale-[1.02]",onClick:()=>{l(!1);try{f.current?.getSenders().forEach(e=>e.track?.stop()),w.current?.getSenders().forEach(e=>e.track?.stop()),f.current?.close(),w.current?.close()}catch{}f.current=null,w.current=null,g.current?.getTracks().forEach(e=>e.stop()),g.current=null,m.current&&(m.current.srcObject=null),b.current&&(b.current.srcObject=null),v("상담을 종료했습니다. 필요하시면 관심 분야 선택으로 이동하세요.")},children:[s.jsx(n,{children:"■"})," 상담 종료"]}):(0,s.jsxs)("button",{className:"px-5 py-3 rounded-xl bg-emerald-600 text-white font-bold hover:bg-emerald-700 shadow-lg transition transform hover:scale-[1.02]",onClick:N,children:[s.jsx(n,{children:"▶"})," 상담 시작"]}),(0,s.jsxs)("button",{className:`px-4 py-2 rounded-xl text-white font-semibold shadow-md transition ${o?"bg-red-500 hover:bg-red-600":"bg-gray-700 hover:bg-gray-800"}`,onClick:()=>{let e=g.current;e&&(e.getAudioTracks().forEach(e=>e.enabled=!e.enabled),i(e=>!e))},disabled:!r,title:o?"음소거 해제":"음소거",children:[s.jsx(n,{children:o?"\uD83D\uDD07":"\uD83C\uDFA4"})," ",o?"마이크 켜기":"마이크 끄기"]}),(0,s.jsxs)("button",{className:`px-4 py-2 rounded-xl text-white font-semibold shadow-md transition ${c?"bg-red-500 hover:bg-red-600":"bg-gray-700 hover:bg-gray-800"}`,onClick:()=>{let e=g.current;e&&(e.getVideoTracks().forEach(e=>e.enabled=!e.enabled),d(e=>!e))},disabled:!r,title:c?"카메라 켜기":"카메라 끄기",children:[s.jsx(n,{children:c?"\uD83D\uDCF7":"\uD83D\uDCF9"})," ",c?"카메라 켜기":"카메라 끄기"]}),(0,s.jsxs)("button",{className:"ml-auto px-4 py-2 rounded-xl bg-indigo-600 text-white font-semibold hover:bg-indigo-700 transition shadow-md",onClick:()=>{window.location.href="/career/interests"},children:["관심분야 선택으로 ",s.jsx(n,{children:"→"})]})]}),s.jsx("p",{className:"mt-4 text-sm text-gray-500 p-2 border-l-4 border-yellow-500 bg-yellow-50 rounded-r-lg",children:"* 데모 모드: 동일 기기에서만 카메라/마이크를 사용해 미러 상담처럼 동작합니다. \xa0 원격 상담을 위해서는 신호 서버(WebSocket 등)로 Offer/Answer, ICE 후보를 교환하도록 확장해야 합니다."})]})}},9912:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});let s=(0,r(8570).createProxy)(String.raw`D:\youth-experience\src\app\(routes)\career\consultant\session\page.tsx#default`)},2029:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>a});var s=r(9510);function a({children:e}){return s.jsx("html",{lang:"ko",children:s.jsx("body",{children:e})})}r(4315)},2523:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>n});var s=r(9510),a=r(7371);function n(){return(0,s.jsxs)("main",{className:"mx-auto max-w-3xl px-6 py-10",children:[s.jsx("h1",{className:"text-2xl font-bold",children:"페이지를 찾을 수 없습니다"}),s.jsx("p",{className:"mt-2 text-gray-600",children:"메뉴에서 다시 선택해주세요."}),s.jsx(a.default,{href:"/",className:"inline-block mt-6 px-4 py-2 rounded bg-black text-white",children:"메인으로"})]})}},7026:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>a});var s=r(6621);let a=e=>[{type:"image/svg+xml",sizes:"any",url:(0,s.fillMetadataSegment)(".",e.params,"icon.svg")+"?bea7d2cfd2f919ef"}]},4315:()=>{}};var t=require("../../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[948,13],()=>r(2442));module.exports=s})();